<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
        layout:decorator="layout"
        >
<head>
    <title th:text="'Test sumary for ' + ${team.name}">Teams</title>
    <script type="text/javascript" th:src="@{/script/team.js}"></script>
    
</head>
<body>
<h1 layout:fragment="header" th:text="'Test sumary for ' + ${team.name}">SVT Test summary page</h1>
<div layout:fragment="content">
	<div id="meta">
		<input id="teamid" type="hidden" th:value="${team.id}"/>
	</div>
    <section>
		<h1 th:text="'Todays testing for ' + ${team.name}">Today's testing</h1>
		
		<table>
			<tr>
				<td>Number of requirements:</td>
				<td th:id="team-tested" th:text="${team.tested}"></td>
			</tr>
			
			<tr>
				<td>Verified:</td>
				<td th:id="team-numverified" th:text="${team.numberOfSucceededRequirements}"></td>
				<td th:id="team-ratioverified" th:text="${team.numberOfSucceededRequirementsRatio}"></td>
			</tr>
			
			<tr>
				<td>Fails:</td>
				<td th:id="team-numfails" th:text="${team.numberOfFailedRequirements}"></td>
				<td th:id="team-ratiofails" th:text="${team.numberOfFailedRequirementsRatio}"></td>
			</tr>
			
			<tr>
				<td>Unstable:</td>
				<td th:id="team-numunstable" th:text="${team.numberOfUnstableRequirements}"></td>
				<td th:id="team-ratiounstable" th:text="${team.numberOfUnstableRequirementsRatio}"></td>
			</tr>
		</table>
		
		<h2>Requirements</h2>
		<table>
            <tbody>
            <th><td>latest test</td><td colspan="2">history</td><td>successratio</td><td>duration</td><td></td></th>
            <th:block th:each="requirement : ${requirements}">
                <tr th:id="'requirement-' + ${requirement.id}" th:class="${requirement.failed}?'failed':(${requirement.success}?'verified':(${requirement.unstable}?'unstable':'undetermined'))">
                	<td class="rowheader">
                		<a th:href="'/requirement/' + ${requirement.id}" th:text="${requirement.subject.name} + ' ' + ${requirement.testRequirement}"></a>
                	</td>
					<td th:id="'requirement-' + ${requirement.id} + '-nottestedsince'" th:text="${requirement.notTestedSince}"></td>
					<td th:id="'requirement-' + ${requirement.id} + '-numberofruns'" th:text="${requirement.numberOfRuns}"></td>
                	<td>
                		<input th:id="'requirement-' + ${requirement.id} + '-lasttested'" type="hidden" th:value="${requirement.latestTestedDate.time}"></input>
                		<div th:id="'requirement-' + ${requirement.id} + '-testlight'" class="testlights">
                			<th:block th:each="result, iterStat : ${requirement.results}">
                				<a class="resultindicator" th:href="'/result/' + ${result.id}">
	                				<img class="resultindicator" th:src="@{/img/} + (${result.success}?'green_light.png':'red_light.png')"></img>
	                			</a>
	                		</th:block>
                		</div>
                	</td>
                	<td th:id="'requirement-' + ${requirement.id} + '-failrate'" th:text="${requirement.failRate} + '%'"></td>
                	<td th:id="'requirement-' + ${requirement.id} + '-duration'" th:text="${requirement.duration}"></td>
                </tr>
            </th:block>
		    </tbody>
        </table>
        
     </section>
</div>
</body>
</html>