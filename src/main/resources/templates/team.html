<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
        layout:decorator="layout"
        >
<head>
    <title th:text="'Test sumary for ' + ${team.name}">Teams</title>
    <script type="text/javascript" th:src="@{/script/team.js}"></script>
    
</head>
<body>
<h1 layout:fragment="header" th:text="'Test sumary for ' + ${team.name}">SVT Test summary page</h1>
<div layout:fragment="content">
	<div id="meta">
		<input id="teamid" type="hidden" th:value="${team.id}"/>
	</div>
    <section>
		<h2>Requirements</h2>
		<table>
            <tbody>
            <tr><th>latest test</th><th colspan="2">history</th><th>successratio</th><th>duration</th><th></th></tr>
            <th:block th:each="requirement : ${requirements}">
                <tr th:id="'requirement-' + ${requirement.id}" th:class="${requirement.failed}?'failed':(${requirement.success}?'verified':(${requirement.unstable}?'unstable':'undetermined'))">
                	<td class="rowheader" width="100%">
                		<a th:href="'/requirement/' + ${requirement.id}" th:text="${requirement.subject.name} + ' ' + ${requirement.testRequirement}"></a>
                	</td>
					<td th:id="'requirement-' + ${requirement.id} + '-nottestedsince'" th:text="${requirement.notTestedSince}"></td>
					<td th:id="'requirement-' + ${requirement.id} + '-numberofruns'" th:text="${requirement.numberOfRuns}"></td>
                	<td>
                		<input th:id="'requirement-' + ${requirement.id} + '-lasttested'" type="hidden" th:value="${requirement.latestTestedDate}?${requirement.latestTestedDate.time}:'0'"></input>
                		<div th:id="'requirement-' + ${requirement.id} + '-testlight'" class="testlights">
                			<th:block th:each="result, iterStat : ${requirement.results}">
                				<a class="resultindicator" th:href="'/result/' + ${result.id}">
	                				<img th:title="${result.touched}  + ' ' + ${result.browser.name} + ' ' + ${result.job.name}" class="resultindicator" th:src="@{/img/} + (${result.success}?'green_light.png':'red_light.png')"></img>
	                			</a>
	                		</th:block>
                		</div>
                	</td>
                	<td th:id="'requirement-' + ${requirement.id} + '-failrate'" th:text="${requirement.failRate} + '%'"></td>
                	<td th:id="'requirement-' + ${requirement.id} + '-duration'" th:text="${requirement.duration}"></td>
                </tr>
            </th:block>
		    </tbody>
        </table>
        
     </section>
</div>
</body>
</html>